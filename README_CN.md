# T.O.V.A. (Test of Variables of Attention) - HTML/JS Version

这是一个基于HTML/JavaScript的T.O.V.A.测试实现，完全复制了原始Inquisit版本的功能和科学有效性。

## 功能特点

- ✅ **精确复制原始测试**: 基于官方Inquisit脚本重建
- ✅ **全屏模式**: 测试期间自动全屏显示
- ✅ **高精度计时**: 使用`performance.now()`实现低延迟响应测量
- ✅ **空格键控制**: 支持空格键和GUI按钮双重控制
- ✅ **数据导出**: 自动生成原始数据和汇总数据的CSV文件
- ✅ **科学统计**: 包含所有原始测试的统计指标（d-prime、z-scores等）

## 测试结构

### 测试阶段
1. **练习阶段**: 50试次 (1:1 目标/非目标比例) - 约3分钟
2. **低频率阶段1**: 162试次 (36目标, 126非目标) - 约5.5分钟  
3. **低频率阶段2**: 162试次 (36目标, 126非目标) - 约5.5分钟
4. **高频率阶段1**: 162试次 (126目标, 36非目标) - 约5.5分钟
5. **高频率阶段2**: 162试次 (126目标, 36非目标) - 约5.5分钟

**总测试时间**: 约24分钟

### 刺激特征
- **目标刺激**: 白色方形背景内顶部的小黑方块
- **非目标刺激**: 白色方形背景内底部的小黑方块
- **刺激持续时间**: 100ms
- **刺激间隔**: 2000ms (SOA)

### 响应要求
- **目标出现时**: 尽快按空格键
- **非目标出现时**: 不要响应
- **最小有效反应时**: 200ms (低于此值被认为是预期性响应)

## 使用方法

### 1. 快速开始
```bash
# 在浏览器中打开
open index.html
# 或使用本地服务器
python -m http.server 8000
# 然后访问 http://localhost:8000
```

### 2. 测试流程
1. 打开`index.html`
2. 输入被试信息（姓名、组别、会话）
3. 阅读说明并查看示例刺激
4. 完成练习阶段
5. 进行正式测试（4个测试块）
6. 测试结束后下载数据文件

### 3. 空格键控制
- 在任何界面都可以使用空格键前进
- 测试期间只有空格键响应有效
- 支持鼠标点击GUI按钮（可选）

## 数据输出

### 原始数据 (tova_raw_*.txt)
包含每个试次的详细信息：
- 响应时间、准确性、刺激类型
- 预期性响应、错误警报标记
- 错误警报后命中反应时间

### 汇总数据 (tova_summary_*.txt)  
包含统计指标：
- **基本指标**: 命中率、漏报率、错误警报率
- **反应时统计**: 平均值、标准差
- **d-prime分析**: 信号检测理论指标
- **z-scores**: 标准化得分
- **分块统计**: 各阶段独立分析

## 技术规格

### 精确计时
- 使用`performance.now()`获得亚毫秒精度
- 事件监听器优化以减少延迟
- 异步处理确保实时响应

### 数据完整性
- 所有统计计算与原始Inquisit版本完全匹配
- z-score调整遵循Gregg & Sedikides (2010)标准
- d-prime计算使用标准信号检测理论公式

### 浏览器兼容性
- Chrome (推荐)
- Firefox  
- Safari
- Edge

## 文件结构
```
tova/
├── index.html          # 主测试界面
├── style.css           # 样式文件
├── tova.js            # 测试逻辑
└── README.md          # 说明文档
```

## 科学验证

此实现基于以下科学文献：

1. **Greenberg, L.M., & Waldman, I.D. (1993)**. Developmental normative data on the Test of Variable of Attention (T.O.V.A.™). *Journal of Child Psychology and Psychiatry*, 34, 1019–1030.

2. **Greenberg, L.M., Kindschi, C.L., Dupuy, T.R., Hughes, S.J. (2016)**. TOVA: Test of Variable Attention. Clinical Manual.

3. **Gregg, A. & Sedikides, C. (2010)**. Narcissistic Fragility: Rethinking Its Links to Explicit and Implicit Self-esteem. *Self and Identity*, 9:2, 142-161.

## 注意事项

1. **环境要求**: 安静的测试环境，减少干扰
2. **硬件要求**: 响应式键盘，稳定的计算机性能
3. **被试准备**: 确保被试理解任务要求
4. **数据备份**: 及时保存和备份测试数据

## 故障排除

### 常见问题
- **全屏不工作**: 确保浏览器支持全屏API
- **按键无响应**: 检查焦点是否在测试窗口
- **数据下载失败**: 检查浏览器下载权限

### 性能优化
- 关闭其他应用程序以确保计算机性能
- 使用有线键盘以减少无线延迟
- 确保浏览器为最新版本

## 许可证

此项目基于原始T.O.V.A. Inquisit脚本重新实现，仅用于研究和教育目的。请遵守相关的知识产权和使用条款。

## 技术支持

如有技术问题或功能建议，请联系开发团队。 